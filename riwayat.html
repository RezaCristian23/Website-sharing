<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Riwayat Input Komponen</title>
  <link rel="icon" type="image/png" href="https://i.postimg.cc/FHxx6SW-V/Logo-Meka-Kalku-JGRP.png">
  <style>
  body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      animation: gradientBG 12s ease infinite;
      margin: 0;
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: rgb(2, 2, 2);
        background: linear-gradient(135deg, #dfe9f3, #ffffff);
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    h1 {
      color: #333;
      margin-bottom: 30px;
      text-align: center;
    }

    .MekaLakuText {
      background: linear-gradient(135deg, rgba(8, 102, 202, 0.85), rgba(6, 71, 150, 0.85));
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
      -webkit-text-fill-color: transparent;
    }

    .card {
      background: rgba(255, 255, 255, 0.15);
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 1000px;
    }

    .table-container {
      overflow-x: auto;
      margin-bottom: 30px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 700px;
      border-radius: 20px;
    }

      .hapusCheckbox {
      appearance: none;
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border: 2px solid rgba(47, 79, 114, 0.85);
      border-radius: 4px;
      cursor: pointer;
      position: relative;
      transition: all 0.2s ease-in-out;
    }

    .hapusCheckbox:checked {
      background-color: #d9534f;
      border-color: #d9534f;
    }

    .hapusCheckbox:checked::after {
      content: "‚úî";
      color: white;
      font-size: 12px;
      position: absolute;
      top: 0px;
      left: 2px;
    }

    .hapusCheckbox:hover {
      box-shadow: 0 0 5px rgba(217, 83, 79, 0.5);
      transform: scale(1.1);
    }

    .table-container tbody {
      display: block;
      max-height: 500px;
      overflow-y: auto;
    }

    .table-container thead,
    .table-container tbody tr {
      display: table;
      width: 100%;
      table-layout: fixed;
    }

    th, td {
      padding: 14px 12px;
      text-align: center;
      border-bottom: 1px solid #ddd;
    }


thead tr {
  background: linear-gradient(135deg, rgba(8, 102, 202, 0.85), rgba(6, 71, 150, 0.85));
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

th {
  color: #fff;
  background: transparent;
}

  th:first-child {
    border-top-left-radius: 8px;
    border-bottom-left-radius: 1px;
  }

  th:last-child {
    border-top-right-radius: 8px;
    border-bottom-right-radius: 1px;
  }


    tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    .NomerID {
      font-weight: bold;
      color: #007bff;
      background: linear-gradient(135deg, rgba(234, 244, 255, 0.8), rgba(212, 234, 255, 0.8));
    }

    .HargaAsli {
      font-weight: bold;
      color: #007bff;
      background: linear-gradient(135deg, #df4d215e, rgba(212, 234, 255, 0.8));
    }

    .HargaJual {
      font-weight: bold;
      color: #007bff;
      background: linear-gradient(135deg, rgba(0, 128, 0, 0.267), rgba(212, 234, 255, 0.8));
    }

    .TombolAction {
      font-weight: bold;
      color: #007bff;
       background: linear-gradient(135deg, rgba(234, 244, 255, 0.8), rgba(212, 234, 255, 0.8));
      /* background: linear-gradient(135deg,rgba(113, 170, 223, 0.8), rgba(59, 92, 59, 0.267)); */
    }

    .totals {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }

    .total-box {
      background: linear-gradient(135deg, #eaf4ff, #d4eaff, #f7fbff);
      padding: 16px;
      border-radius: 10px;
      text-align: center;
    }

    .total-box {
      background: linear-gradient(135deg, rgba(234, 244, 255, 0.8), rgba(212, 234, 255, 0.8));
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding: 16px;
      border-radius: 10px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .total-box span {
      display: block;
      font-size: 16px;
      font-weight: bold;
      color: #424242b2;

    }

    .total-box strong {
      font-size: 20px;
      color: #007bff9d;
    }

    .button-group {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px;
    }

    button {
      background: linear-gradient(135deg, rgba(8, 102, 202, 0.85), rgba(6, 71, 150, 0.85));
      backdrop-filter: blur(10px);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
      font-size: 15px;
    }

    button:hover {
      background-color: #0056b3;
    }

/* Gaya Umum untuk Pop-up yang Lebih Elegan */
.popup-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
    animation: fadeIn 0.3s ease forwards;
}

.popup-content {
    background: rgba(255, 255, 255, 0.98);
    padding: 30px;
    border-radius: 12px;
    width: 380px;
    max-width: 90%;
    text-align: left;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    transform: translateY(-10px);
    opacity: 0;
    animation: slideUp 0.3s ease forwards;
}

/* Animasi untuk Pop-up */
@keyframes fadeIn {
    from { background: rgba(0,0,0,0); }
    to { background: rgba(0,0,0,0.5); }
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(-10px); opacity: 1; }
}

.popup-content h3 {
    color: rgba(8, 102, 202, 0.85);
    margin-bottom: 15px;
    border-bottom: 2px solid rgba(8, 102, 202, 0.2);
    padding-bottom: 10px;
}

.popup-content p {
    color: #555;
    font-size: 15px;
    line-height: 1.6;
    margin-bottom: 20px;
    text-align: center; /* Teks paragraf tetap di tengah */
}

.popup-buttons {
    display: flex;
    gap: 15px;
    justify-content: flex-end; /* Tombol rata kanan */
}

.popup-buttons button {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    cursor: pointer;
    transition: background 0.3s ease, box-shadow 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
}

/* Gaya Tombol "Ya" (Konfirmasi) */
.btn-ya {
    background: linear-gradient(135deg, #d9534f, #c14440);
    color: #fff;
}

.btn-ya:hover {
    background: linear-gradient(135deg, #c14440, #a93c37);
    box-shadow: 0 4px 8px rgba(217, 83, 79, 0.3);
}

/* Gaya Tombol "Batal" */
.btn-batal {
    background: #e0e0e0;
    color: #333;
}

.btn-batal:hover {
    background: #d0d0d0;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
    .MekaKalku {
      display: block;
      margin: 30px auto;
      max-width: 280px;
      width: 90%;
      border-radius: 18px;
      box-shadow:
        0 8px 24px rgba(8, 102, 202, 0.3),
        0 0 12px rgba(6, 71, 150, 0.4);
      background: linear-gradient(135deg, rgba(8, 102, 202, 0.85), rgba(6, 71, 150, 0.85));
      padding: 12px;
      transition: transform 0.35s ease, box-shadow 0.35s ease;
      cursor: default;
      user-select: none;
    }

    .MekaKalku:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow:
        0 12px 32px rgba(8, 102, 202, 0.85),
        0 0 12px rgba(6, 71, 150, 0.85);
    }
    
      /* Gaya untuk Pop-up Tempel Kode yang Lebih Elegan */
    #popupPasteCode .popup-content {
    background: rgba(255, 255, 255, 0.98);
    padding: 30px;
    border-radius: 12px;
    width: 450px;
    max-width: 90%;
    text-align: left; /* Alihkan teks ke kiri untuk kesan modern */
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    transform: translateY(-10px); /* Efek sedikit turun saat muncul */
    opacity: 0;
    animation: slideUp 0.3s ease forwards;
    }

    @keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(-10px); opacity: 1; }
    }

    #popupPasteCode h3 {
    color: rgba(8, 102, 202, 0.85); /* Warna tema utama */
    margin-bottom: 15px;
    border-bottom: 2px solid rgba(8, 102, 202, 0.2); /* Garis bawah tema */
    padding-bottom: 10px;
    }

    #popupPasteCode p {
    color: #555;
    font-size: 15px;
    line-height: 1.6;
    margin-bottom: 20px;
    }

    #pasteCodeTextarea {
    width: calc(100% - 22px); /* Agar tidak mentok ke padding */
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 10px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 14px;
    resize: vertical;
    margin-bottom: 25px;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
    transition: border-color 0.3s ease;
    }

    #pasteCodeTextarea:focus {
    outline: none;
    border-color: rgba(8, 102, 202, 0.7); /* Warna fokus tema */
    box-shadow: 0 0 8px rgba(8, 102, 202, 0.2);
    }

    #popupPasteCode .popup-buttons {
    display: flex;
    gap: 15px;
    justify-content: flex-end; /* Tombol rata kanan untuk modern look */
    }

    #popupPasteCode .popup-buttons button {
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    cursor: pointer;
    transition: background 0.3s ease, box-shadow 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
    }

    #popupPasteCode .popup-buttons .btn-ya {
    background: linear-gradient(135deg, rgba(8, 102, 202, 0.9), rgba(6, 71, 150, 0.9)); /* Lebih intens */
    color: #fff;
    }

    #popupPasteCode .popup-buttons .btn-ya:hover {
    background: linear-gradient(135deg, rgba(7, 82, 161, 0.9), rgba(5, 57, 120, 0.9));
    box-shadow: 0 4px 8px rgba(8, 102, 202, 0.3);
    }

    #popupPasteCode .popup-buttons .btn-batal {
    background: #e0e0e0;
    color: #333;
    }

    #popupPasteCode .popup-buttons .btn-batal:hover {
    background: #d0d0d0;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

    @media (max-width: 600px) {
      body {
        padding: 20px 10px;
      }

      table {
        font-size: 14px;
      }

      th, td {
        padding: 10px 8px;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Riwayat <span class="MekaLakuText">MekaKalku</span></h1>
    <div class="table-container" id="riwayatContainer"></div>
    <div class="button-group">
      <button id="hapusBtn" class="delete-btn" onclick="showPopup()">Hapus yang dipilih</button>
      <button onclick="hapusSemua()">Hapus Semua Riwayat</button>
      <button onclick="cetakPDF()">Cetak Hasil</button>
      <button onclick="salinRiwayat()">Import</button>
      <button onclick="showPasteCodePopup()">Export</button>
    </div>
    <ul style="display: flex; gap: 16px; list-style: none; padding: 0; margin: 20px 0 0 0; justify-content: center;">
      <li><a href="index.html" style="text-decoration: none; color: #007BFF;">Kalkulator Komponen</a></li>
      <li><a href="aboutme.html" style="text-decoration: none; color: #007BFF;">About Me</a></li>
    </ul>
    <footer>
      <p style="font-size: 12px; color: #aaa; text-align: center; margin-top: 20px;">&copy; 2025 MekaKalku. All rights reserved.</p>
      <p style="font-size: 12px; color: #aaa; text-align: center; ">Made with ‚ù§Ô∏è by <a href="https://www.instagram.com/rezacristiansilalahi?igsh=MXJ3ZnFtYmk4MmJqbA==" target="_blank" style="color: #00d4ff;">Ckyandaa2</a></p>
    </footer>
  </div>


  <div id="popupConfirm" class="popup-overlay">
    <div class="popup-content">
      <h3>Hapus data yang di pilih?</h3>
      <p>Apakah kamu ingin menghapus data yang di pilih?</p>
      <div class="popup-buttons">
        <button class="btn-ya" onclick="hapusTerpilih()">Ya</button>
        <button class="btn-batal" onclick="closePopup()">Batal</button>
      </div>
    </div>
  </div>

  <div id="popupPasteCode" class="popup-overlay">
    <div class="popup-content">
      <h3>Tempel Kode Riwayat</h3>
      <p>Salin kode riwayat dari sumber lain dan tempelkan di bawah ini.</p>
      <textarea id="pasteCodeTextarea" placeholder="Masukkan kode riwayat di sini..." rows="6"></textarea>
      <div class="popup-buttons">
        <button class="btn-ya" onclick="prosesImpor()">Tempel & Proses</button>
        <button class="btn-batal" onclick="closePasteCodePopup()">Batal</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/lz-string@1.4.4/libs/lz-string.min.js"></script>
  <script>
    let dataRiwayat = JSON.parse(localStorage.getItem('riwayatComponent')) || [];
    const container = document.getElementById('riwayatContainer');

    function renderTable() {
        if (dataRiwayat.length === 0) {
            container.innerHTML = '<p style="text-align:center">Kamu belum ada memasukan riwayat apapun, silakan <a style="text-decoration: none; color: #007BFF;" href="index.html">Tambahkan</a> terlebih dahulu.</p><img class="MekaKalku" style="204MekaLaku" src="https://i.postimg.cc/v8rRZPfs/204-Mekakalku.png" draggable="false" alt="">';
            return;
    }

      let totalKomponen = 0;
      let totalHargaAsli = 0;
      let totalKeuntungan = 0;
      let totalHargaJual = 0;

      let tableHTML = `
        <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>No</th>
              <th>Component Used</th>
              <th>Harga Asli</th>
              <th>Keuntungan</th>
              <th>Harga Jual</th>
              <th>Waktu Input</th>
              <th>Pilih</th>
            </tr>
          </thead>
          <tbody>
      `;

      dataRiwayat.forEach((item, index) => {
        tableHTML += `
          <tr>
            <td class="NomerID">${index + 1}</td>
            <td>${item.totalComponent}</td>
            <td class="HargaAsli" style="color: #df4d21c4;">$${item.hargaAsli.toFixed(2)}</td>
            <td style="color: green;" >üí∏${item.keuntungan.toFixed(2)}</td>
            <td style="color: green;" class="HargaJual" style="color: black;" >$${item.hargaJual.toFixed(2)}</td>
            <td>${item.waktuInput || '-'}</td>
            <td class="TombolAction"><input type="checkbox" class="hapusCheckbox" data-index="${index}"></td>
          </tr>
        `;

        totalKomponen += item.totalComponent;
        totalHargaAsli += item.hargaAsli;
        totalKeuntungan += item.keuntungan;
        totalHargaJual += item.hargaJual;
      });

      tableHTML += '</tbody></table></div>';

      const totalHTML = `
        <div class="totals">
          <div class="total-box">
            <span>Total Komponen</span>
            <strong>${totalKomponen}</strong>
          </div>
          <div class="total-box">
            <span>Total Harga Asli</span>
            <strong>$${totalHargaAsli.toFixed(2)}</strong>
          </div>
          <div class="total-box">
            <span>Total Keuntungan</span>
            <strong style="color: green;" >$${totalKeuntungan.toFixed(2)}</strong>
          </div>
          <div class="total-box">
            <span>Total Harga Jual</span>
            <strong>$${totalHargaJual.toFixed(2)}</strong>
          </div>
        </div>
      `;

      container.innerHTML = tableHTML + totalHTML;
    }

    function showPopup() {
      document.getElementById('popupConfirm').style.display = 'flex';
    }

    function closePopup() {
      document.getElementById('popupConfirm').style.display = 'none';
    }

function hapusTerpilih() {
  if (dataRiwayat.length === 0) {
    Swal.fire('Informasi', 'Tidak ada data riwayat yang bisa dihapus.', 'info');
    closePopup(); // Pastikan pop-up konfirmasi juga tertutup
    return; // Hentikan fungsi jika tidak ada data
  }

  const checkboxTerpilih = document.querySelectorAll('.hapusCheckbox:checked');
  if (checkboxTerpilih.length === 0) {
    Swal.fire('Peringatan', 'Pilih setidaknya satu data yang ingin dihapus.', 'warning');
    closePopup();
    return;
  }

  const indexTerpilih = Array.from(checkboxTerpilih)
    .map(cb => parseInt(cb.getAttribute('data-index')));

  dataRiwayat = dataRiwayat.filter((_, index) => !indexTerpilih.includes(index));
  localStorage.setItem('riwayatComponent', JSON.stringify(dataRiwayat));
  renderTable();
  closePopup();
  Swal.fire(
    'Berhasil Dihapus!',
    'Data yang dipilih telah dihapus.',
    'success'
  );
}

      function hapusSemua() {
  if (dataRiwayat.length === 0) {
    Swal.fire('Informasi', 'Tidak ada data riwayat yang bisa dihapus.', 'info');
    return; // Hentikan fungsi jika tidak ada data
  }

  Swal.fire({
    title: 'Yakin mau hapus semua?',
    text: "Tindakan ini tidak bisa dibatalkan!",
    icon: 'warning',
    showCancelButton: true,
    confirmButtonColor: '#d33',
    cancelButtonColor: '#ccc',
    confirmButtonText: 'Ya, Hapus!',
    cancelButtonText: 'Batal'
  }).then((result) => {
    if (result.isConfirmed) {
      localStorage.removeItem('riwayatComponent');
      dataRiwayat = [];
      renderTable();
      Swal.fire(
        'Berhasil Dihapus!',
        'Semua riwayat telah dihapus.',
        'success'
      );
    }
  });
}

async function cetakPDF() {
  // Periksa apakah ada data riwayat
  if (dataRiwayat.length === 0) {
    Swal.fire('Informasi', 'Tidak ada data riwayat yang bisa dicetak.', 'info');
    return; // Hentikan fungsi jika tidak ada data
  }

  Swal.fire({
    title: 'Konfirmasi Cetak PDF',
    text: 'Apakah kamu ingin melakukan cetak PDF?',
    icon: 'question',
    showCancelButton: true,
    confirmButtonColor: '#0866CAD9',
    cancelButtonColor: '#d33',
    confirmButtonText: 'Ya, Cetak',
    cancelButtonText: 'Batal'
  }).then((result) => {
    if (result.isConfirmed) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(18);
      doc.text("Riwayat Input Komponen || MekaKalku", 14, 15);
      doc.setFontSize(12);
      doc.text(`Tanggal Cetak: ${new Date().toLocaleString()}`, 14, 23);

      const tableColumn = ["No", "Component", "Harga Asli", "Keuntungan", "Harga Jual", "Waktu Input"];
      const tableRows = [];

      let totalKomponen = 0;
      let totalHargaAsli = 0;
      let totalKeuntungan = 0;
      let totalHargaJual = 0;

      dataRiwayat.forEach((item, index) => {
        const rowData = [
          index + 1,
          item.totalComponent,
          `$${item.hargaAsli.toFixed(2)}`,
          `$${item.keuntungan.toFixed(2)}`,
          `$${item.hargaJual.toFixed(2)}`,
          item.waktuInput || '-'
        ];
        tableRows.push(rowData);

        totalKomponen += item.totalComponent;
        totalHargaAsli += item.hargaAsli;
        totalKeuntungan += item.keuntungan;
        totalHargaJual += item.hargaJual;
      });

      doc.autoTable({
        head: [tableColumn],
        body: tableRows,
        startY: 28,
        styles: { fontSize: 10 }
      });

      let finalY = doc.lastAutoTable.finalY + 10;
      doc.setFontSize(12);
      doc.text("Ringkasan Total:", 14, finalY);
      finalY += 6;
      doc.text(`Total Komponen: ${totalKomponen}`, 14, finalY);
      doc.text(`Total Harga Asli: $${totalHargaAsli.toFixed(2)}`, 80, finalY);
      finalY += 6;
      doc.text(`Total Keuntungan: $${totalKeuntungan.toFixed(2)}`, 14, finalY);
      doc.text(`Total Harga Jual: $${totalHargaJual.toFixed(2)}`, 80, finalY);

      finalY += 15;
      doc.setFontSize(10);
      doc.setTextColor(150);
      doc.text("¬© 2025 MekaKalku. All rights reserved.", 14, finalY);
      finalY += 5;
      doc.text("Made with ‚ù§Ô∏è by Ckyandaa2", 14, finalY);

      doc.save("MekaKalku Riwayat_Penjualan.pdf");

      Swal.fire(
        'Berhasil!',
        'PDF berhasil dibuat dan diunduh.',
        'success'
      );
    }
  });
}

// --- FUNGSI BARU UNTUK ENKRIPSI DAN DEKRIPSI ---

// Fungsi untuk mengompres dan mengenkripsi data
function enkripsiData(data) {
  const dataJson = JSON.stringify(data);
  // Menggunakan lz-string untuk kompresi dan encoding
  return LZString.compressToBase64(dataJson);
}

// Fungsi untuk mendekripsi dan mengurai data
function dekripsiData(kode) {
  try {
    const dataJson = LZString.decompressFromBase64(kode);
    if (!dataJson) {
      throw new Error("Kode tidak valid.");
    }
    const data = JSON.parse(dataJson);
    return data;
  } catch (e) {
    console.error("Gagal mendekripsi kode:", e);
    Swal.fire('Error', 'Kode yang Anda masukkan tidak valid.', 'error');
    return null;
  }
}

// Fungsi untuk menyalin riwayat ke kode
function salinRiwayat() {
  if (dataRiwayat.length === 0) {
    Swal.fire('Informasi', 'Tidak ada data untuk disalin.', 'info');
    return;
  }

  const kode = enkripsiData(dataRiwayat);
  navigator.clipboard.writeText(kode)
    .then(() => {
      Swal.fire('Berhasil!', 'Kode riwayat berhasil disalin.', 'success');
    })
    .catch(err => {
      console.error('Gagal menyalin kode:', err);
      Swal.fire('Error', 'Gagal menyalin kode.', 'error');
    });
}

// Fungsi untuk menampilkan pop-up tempel kode
function showPasteCodePopup() {
  document.getElementById('popupPasteCode').style.display = 'flex';
}

// Fungsi untuk menutup pop-up tempel kode
function closePasteCodePopup() {
  document.getElementById('popupPasteCode').style.display = 'none';
  document.getElementById('pasteCodeTextarea').value = ''; // Bersihkan textarea
}

// Fungsi untuk memproses impor data dari kode
function prosesImpor() {
  const textarea = document.getElementById('pasteCodeTextarea');
  const kode = textarea.value.trim();

  if (!kode) {
    Swal.fire('Peringatan', 'Input kode tidak boleh kosong.', 'warning');
    return;
  }

  const dataBaru = dekripsiData(kode);

  if (dataBaru) {
    Swal.fire({
      title: 'Konfirmasi Impor',
      text: "Apakah Anda ingin menambahkan data baru atau mengganti riwayat yang ada?",
      icon: 'question',
      showCancelButton: true,
      showDenyButton: true,
      confirmButtonColor: '#0866CAD9',
      denyButtonColor: '#d33',
      cancelButtonColor: '#ccc',
      confirmButtonText: 'Tambah Data',
      denyButtonText: 'Ganti Riwayat',
      cancelButtonText: 'Batal'
    }).then((result) => {
      if (result.isConfirmed) {
        dataRiwayat = dataRiwayat.concat(dataBaru);
        localStorage.setItem('riwayatComponent', JSON.stringify(dataRiwayat));
        renderTable();
        Swal.fire('Berhasil!', 'Data riwayat berhasil ditambahkan.', 'success');
      } else if (result.isDenied) {
        dataRiwayat = dataBaru;
        localStorage.setItem('riwayatComponent', JSON.stringify(dataRiwayat));
        renderTable();
        Swal.fire('Berhasil!', 'Riwayat berhasil diganti.', 'success');
      }
      closePasteCodePopup(); // Tutup pop-up setelah proses
    });
  }
}


    // From analisa
     document.addEventListener('DOMContentLoaded', (event) => {
        const pageName = window.location.pathname.split('/').pop();

        // Buat kunci unik untuk sesi ini, misal: "visited_index.html"
        const sessionKey = `visited_${pageName}`;

        // Periksa apakah pengunjung sudah pernah dicatat di sesi ini
        if (!sessionStorage.getItem(sessionKey)) {
            // Jika belum ada di sessionStorage, catat sebagai kunjungan baru
            let visitData = JSON.parse(localStorage.getItem('myWebsiteAnalytics')) || {};

            if (visitData[pageName]) {
                visitData[pageName] += 1;
            } else {
                visitData[pageName] = 1;
            }

            localStorage.setItem('myWebsiteAnalytics', JSON.stringify(visitData));

            console.log(`Kunjungan ke halaman "${pageName}" tercatat.`);

            // Tambahkan penanda ke sessionStorage agar tidak dihitung lagi di sesi ini
            sessionStorage.setItem(sessionKey, 'true');
        } else {
            console.log(`Kunjungan ke halaman "${pageName}" sudah tercatat di sesi ini.`);
        }
    });

    renderTable();
  </script>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

</body>
</html>
